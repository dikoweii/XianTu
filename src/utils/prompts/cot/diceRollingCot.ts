/**
 * @fileoverview 判定系统 CoT v2.2.0
 * @version 2.2.0
 * @lastUpdated 2025-11-08
 */

export const diceRollingCotPrompt = `
# 🎲 判定系统 v2.2

## 1. 触发判断（95%场景不判定）

### 需要判定
- 生死战斗、危险探索
- 有明确失败风险的行动

### 禁止判定
- 对话/交流/说话
- 已控制/高好感对象
- 日常修炼/生活
- 确定成功的事
- 实力碾压

---

## 2. 难度计算

### 基础难度
- 极易≤10、简单11-20、普通21-35、困难36-50、艰难51-70、极难71-90、几乎不可能>90

### 境界压制
- 大境界差：±30/境
- 小阶段差：±5/阶（初期→中期→后期→圆满→极境）

### 输出格式
Type & Difficulty: [类型] | 基础[X] ± 压制[Y] = 最终[Z]

---

## 3. 判定值计算

### 先天加成公式
| 类型 | 公式 |
|-----|------|
| 战斗 | 根骨×0.5 + 灵性×0.3 + 气运×0.2 |
| 修炼 | 悟性×0.5 + 灵性×0.3 + 心性×0.2 |
| 技艺 | 悟性×0.5 + 根骨×0.3 + 灵性×0.2 |
| 社交 | 魅力×0.5 + 悟性×0.3 + 心性×0.2 |
| 探索 | 气运×0.5 + 灵性×0.3 + 悟性×0.2 |

### 后天加成
对应先天公式，使用后天六司数值，结果÷5

### 境界加成
- 大境界：凡人0、炼气5、筑基12、金丹20、元婴30、化神42、炼虚56、合体72、渡劫90
- 阶段：初期+0、中期+2、后期+4、圆满+6、极境+8

### 其他加成
- 法宝/阵法/功法/天赋/丹药/大道/环境等
- 🔴 字段名准确，不用"装备""状态"等模糊词
- 无加成写0，不凭空虚构

### 计算步骤
1. 列出所有项：先天 + 后天 + 境界 + [各项加成] + 骰点
2. 逐步累加：A+B=X, X+C=Y, Y+D=Z...
3. 验证结果：最终判定值 ✓

**示例**：
先天:6 + 后天:0 + 境界:11 + 法宝:10 + 功法:55 + 骰点:16
验算: 6+0=6, 6+11=17, 17+10=27, 27+55=82, 82+16=98 ✓

---

## 4. 结果判定

### 判定流程（4步）
1. **计算判定值**：先天+后天+境界+各项加成+骰点 = 判定值
2. **基础结果**：
   - 判定值 < 难度 → 失败
   - 判定值 ≥ 难度 → 成功
   - 判定值 ≥ 难度+15 → 大成功
   - 判定值 ≥ 难度+30 → 完美
3. **骰点修正**：
   - 骰点1-2 → 结果降一级
   - 骰点19-20 → 结果升一级
   - 其他骰点 → 不修正
   - 等级链：大失败 ↔ 失败 ↔ 成功 ↔ 大成功 ↔ 完美
4. **最终结果**：基础结果经骰点修正后的结果

### 输出格式
Result: [判定值] vs [难度] → [基础结果] → [骰点修正] → [最终结果]

### DiceCard格式
〖类型:结果,判定值:X,难度:Y(等级),骰点:Z,先天:A,后天:B,境界:C,[其他加成]〗

🔴 字段名必须与COT计算一致（阵法/法宝/功法等）
`.trim();
